(this["webpackJsonpsmarthome-react"]=this["webpackJsonpsmarthome-react"]||[]).push([[0],{30:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(23),r=n.n(a),i=(n(30),n(15)),o=n(5),l=n(12),u=n(21),j=n(25),h=n(0),m=function(e){var t=e.delay,n=e.onDelayStart,s=e.onDelayEnd,a=e.replace,r=e.to,l=Object(j.a)(e,["delay","onDelayStart","onDelayEnd","replace","to"]),m=null,f=Object(o.e)(),b=Object(o.f)();Object(c.useEffect)((function(){return function(){m&&clearTimeout(m)}}),[m]);return Object(h.jsx)(i.b,Object(u.a)(Object(u.a)({},l),{},{to:r,onClick:function(e){(null===b||void 0===b?void 0:b.pathname)!==r&&(n(e,r),e.defaultPrevented||(e.preventDefault(),m=setTimeout((function(){a?f.replace(r):f.push(r),s(e,r)}),t)))}}))};m.defaultProps={replace:!1,delay:0,onDelayStart:function(){},onDelayEnd:function(){}};var f=m,b=function(e){var t=e.icon,n=e.route;return Object(h.jsx)(f,{to:n,delay:100,className:"menuBtn",children:Object(h.jsx)(l.a,{icon:t})})},p=function(e){var t=e.text,n=e.back,c=e.settings;return Object(h.jsxs)("div",{className:"w-screen mt-5",style:{height:"64px"},children:[Object(h.jsxs)("div",{className:"flex flex-row justify-between text-gray-300 w-full",children:[Object(h.jsx)("div",{className:"text-left pl-5 text-3xl mr-auto min-w-full",children:n?Object(h.jsx)(i.b,{to:"/",children:Object(h.jsx)(l.a,{icon:"arrow-left",className:"headerBtn"})}):""}),Object(h.jsx)("div",{className:"text-right pr-5 text-3xl ml-auto min-w-full",children:c?Object(h.jsx)(l.a,{icon:"cog",className:"headerBtn"}):""})]}),Object(h.jsx)("div",{className:"text-3xl font-semibold text-center w-max mx-auto relative",style:{position:"absolute",top:"24px",left:"50%",transform:"translateX(-50%)",color:"white"},children:t})]})},d=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{text:"smarthome.app"}),Object(h.jsx)("div",{className:"flex justify-center items-center h-full",children:Object(h.jsxs)("div",{className:"grid grid-cols-3 gap-10 px-5 w-full h-full",children:[Object(h.jsx)(b,{route:"/heating",icon:"fire-alt"}),Object(h.jsx)(b,{route:"/tasks",icon:"tasks"}),Object(h.jsx)(b,{route:"/shopping",icon:"shopping-cart"}),Object(h.jsx)(b,{route:"/map",icon:"route"}),Object(h.jsx)(b,{route:"/cam",icon:"video"}),Object(h.jsx)(b,{route:"/",icon:"money-bill-wave"})]})})]})},x=n(3),O=n(4),v=n.n(O),g=n(8),y=function(e){var t=e.setFormHidden,n=Object(c.useState)({target:20,program:{}}),s=Object(x.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(20),o=Object(x.a)(i,2),l=o[0],u=o[1],j=Object(c.useState)(""),m=Object(x.a)(j,2),f=m[0],b=m[1],p=Object(c.useState)(""),d=Object(x.a)(p,2),O=d[0],y=d[1],N=Object(c.useState)(""),w=Object(x.a)(N,2),k=w[0],S=w[1],C=Object(c.useState)(""),_=Object(x.a)(C,2),T=_[0],F=_[1],E=Object(c.useState)(null),I=Object(x.a)(E,2),D=I[0],B=I[1],J=Object(c.useState)(!0),P=Object(x.a)(J,2),L=P[0],G=P[1];function H(){return A.apply(this,arguments)}function A(){return(A=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(!0),e.next=4,fetch("https://server.smarthome.mjfullstack.com/heating/conf",{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){return e.json().then((function(e){return e}))}));case 4:t=e.sent,r(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),B(e.t0);case 11:return e.prev=11,G(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function V(){return(V=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server.smarthome.mjfullstack.com/heating/",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({form:t})}).then((function(){H()}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e){switch(e.target.name){case"on_1":b(e.target.value);break;case"on_2":S(e.target.value);break;case"off_1":y(e.target.value);break;case"off_2":F(e.target.value)}};return Object(c.useEffect)((function(){H(),u(a.target),b(a.program.on_1),y(a.program.off_1),S(a.program.on_2),F(a.program.off_2)}),[a.target,a.program.on_1,a.program.off_1,a.program.on_2,a.program.off_2]),D?Object(h.jsx)("div",{className:"bg-red-500 text-black",children:D.message}):L?Object(h.jsx)("div",{className:"centerCol w-full",children:Object(h.jsxs)("div",{className:"lds-ellipsis",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})}):Object(h.jsxs)("div",{className:"centerCol text-white",children:[Object(h.jsx)("ul",{children:Object(h.jsxs)("li",{children:["Target: ",l,"\xb0C"]})}),Object(h.jsxs)("form",{className:"centerCol space-y-2 mt-5",onSubmit:function(e){e.preventDefault(),function(e){V.apply(this,arguments)}({program:{on_1:f,off_1:O,on_2:k,off_2:T},target:l,program_on:!0}),t(!0)},children:[Object(h.jsx)("input",{name:"target",type:"range",min:"6",max:"26",onChange:function(e){u(e.target.value)},value:l,className:"mb-5"}),Object(h.jsxs)("div",{className:"grid grid-cols-2",children:[Object(h.jsx)("label",{children:"ON 1 "}),Object(h.jsx)("input",{name:"on_1",type:"time",className:"timeInput text-black",value:f,onChange:M}),Object(h.jsx)("label",{children:"OFF 1 "}),Object(h.jsx)("input",{name:"off_1",type:"time",className:"timeInput text-black",value:O,onChange:M}),Object(h.jsx)("label",{children:"ON 2 "}),Object(h.jsx)("input",{name:"on_2",type:"time",className:"timeInput text-black",value:k,onChange:M}),Object(h.jsx)("label",{children:"OFF 2 "}),Object(h.jsx)("input",{name:"off_2",type:"time",className:"timeInput text-black",value:T,onChange:M})]}),Object(h.jsx)("div",{className:"pt-5",children:Object(h.jsx)("button",{type:"submit",className:"submitBtn",children:"SAVE"})})]})]})},N=function(e){e.props;var t=Object(c.useState)(null),n=Object(x.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(null),i=Object(x.a)(r,2),o=i[0],l=i[1],u=Object(c.useState)(!0),j=Object(x.a)(u,2),m=j[0],f=j[1],b=Object(c.useState)("white"),p=Object(x.a)(b,2),d=p[0],O=p[1];function y(){return(y=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,fetch("https://server.smarthome.mjfullstack.com/heating/info").then((function(e){return e.json().then((function(e){return console.log(e),e}))}));case 4:t=e.sent,a(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l(e.t0);case 11:return e.prev=11,f(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function N(){return(N=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://server.smarthome.mjfullstack.com/heating/info").then((function(e){return e.json().then((function(e){return e.on?O("red"):O("white"),e}))}));case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){y.apply(this,arguments)}();var e=setInterval((function(){!function(){N.apply(this,arguments)}()}),3e3);return function(){return clearInterval(e)}}),[]),o?"Failed to load heating info":m?Object(h.jsxs)("div",{className:"lds-ripple mt-10",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]}):Object(h.jsxs)("div",{className:"flex flex-col justify-start items-center h-full w-full px-2 space-y-2 pt-5",children:[Object(h.jsx)("div",{className:"text-white text-6xl font-semibold py-5",style:{color:d},children:s.indoor_temp}),Object(h.jsxs)("div",{className:"text-white",children:[Object(h.jsx)("span",{className:"font-semibold text-gray-200",children:"Outdoor:"})," ",Object(h.jsx)("span",{className:"font-bold",children:s.outdoor_temp})]}),Object(h.jsxs)("div",{className:"text-white",children:[Object(h.jsx)("span",{className:"font-semibold text-gray-200",children:"Weather:"})," ",Object(h.jsx)("span",{className:"font-bold",children:s.weather})]})]})},w=function(){var e=Object(c.useState)(!0),t=Object(x.a)(e,2),n=t[0],s=t[1];return Object(h.jsxs)("div",{className:"h-full w-full",children:[Object(h.jsx)(p,{text:"Central Heating",back:!0}),Object(h.jsx)("hr",{className:"mt-5"}),Object(h.jsx)("div",{className:"flex flex-col justify-center items-center h-full w-full overflow-y-auto",children:n?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{}),Object(h.jsx)("button",{onClick:function(e){s(!n)},className:"submitBtn",children:"Settings"})]}):Object(h.jsx)(y,{setFormHidden:s})})]})},k=function(e){var t=e.handleSubmit,n=e.newItem,c=e.setNewItem;return Object(h.jsxs)("form",{onSubmit:t,className:"centerCol w-full",children:[Object(h.jsx)("input",{type:"text",className:"w-5/6 rounded-2xl mt-10 py-1 px-3 text-center outline-none shadow-md inner-shadow border border-gray-400",onChange:function(e){return c(e.target.value)},value:n}),Object(h.jsx)("button",{type:"submit",className:"plusBtn mt-2 outline-none focus:outline-none",children:"+"})]})},S=function(e){var t=e.name,n=e.tasks,s=e.DeleteFunc,a=e.AddFunc,r=Object(c.useState)(""),i=Object(x.a)(r,2),o=i[0],u=i[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"taskBlock max-h-96 overflow-y-auto",children:n.length?n.map((function(e,t){return Object(h.jsxs)("div",{className:"task pt-1",children:[Object(h.jsx)("h1",{className:"font-semibold ml-2 pt-1",children:e[1]},"h1"+t),Object(h.jsx)(l.a,{icon:"check-circle",onDoubleClick:function(){return s(e[0])},className:"deleteIcon mt-1"},"icon"+t)]},"div"+t)})):Object(h.jsx)("div",{className:"text-white",children:"Nothing here!"})}),Object(h.jsx)(k,{handleSubmit:function(e){e.preventDefault(),o&&(a(t,o),u(""))},newItem:o,setNewItem:u})]})},C=function(){var e=Object(c.useState)(null),t=Object(x.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!0),r=Object(x.a)(a,2),i=r[0],o=r[1],l=Object(c.useState)([]),u=Object(x.a)(l,2),j=u[0],m=u[1];function f(){return(f=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,fetch("https://server.smarthome.mjfullstack.com/tasks",{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){return e.json().then((function(e){m(e)}))}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),s(e.t0);case 10:return e.prev=10,setTimeout((function(){o(!1)}),400),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})))).apply(this,arguments)}function b(e,t){return d.apply(this,arguments)}function d(){return(d=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server.smarthome.mjfullstack.com/tasks",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:t,task:n})}).then((function(e){return e.json().then((function(e){m(e)}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return y.apply(this,arguments)}function y(){return(y=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server.smarthome.mjfullstack.com/tasks/".concat(t),{headers:{"Content-Type":"application/json"},method:"DELETE",body:JSON.stringify({id:t})}).then((function(e){return e.json().then((function(e){m(e)}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),n?"Failed to load tasks: "+n.message:Object(h.jsxs)("div",{className:"max-h-screen w-screen overflow-hidden",children:[Object(h.jsx)(p,{text:"Tasks",back:!0}),Object(h.jsx)("hr",{className:"mt-5"}),Object(h.jsx)("div",{className:"flex flex-row h-full justify-center",children:["Les","Mike"].map((function(e){return Object(h.jsxs)("div",{className:"flex flex-col justify-start items-center w-full mt-5",children:[Object(h.jsx)("div",{className:"font-bold text-white text-4xl",children:e}),i?Object(h.jsxs)("div",{className:"centerCol w-full",children:[Object(h.jsxs)("div",{className:"lds-ellipsis",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]}),Object(h.jsx)(k,{newItem:b})]}):Object(h.jsx)(S,{name:e,tasks:j[e],DeleteFunc:O,AddFunc:b})]})}))})]})},_=function(e){var t=e.list,n=e.deleteItem;return Object(h.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"50vh"},children:Object(h.jsx)("div",{className:"flex flex-col justify-start items-center px-2 space-y-2 divide-y pt-5",children:t.length?t.map((function(e,t){return Object(h.jsxs)("div",{className:"task pt-1",children:[Object(h.jsx)("h1",{className:"text-2xl ml-2",children:e.item_name},"h1"+t),Object(h.jsx)(l.a,{icon:"check-circle",onDoubleClick:function(){return n(e.id)},className:"deleteIcon"},"icon"+t)]},"div"+t)})):Object(h.jsx)("div",{className:"text-white",children:"Nothing here!"})})})},T=function(){var e=Object(c.useState)([]),t=Object(x.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),r=Object(x.a)(a,2),i=r[0],o=r[1],l=Object(c.useState)(!0),u=Object(x.a)(l,2),j=u[0],m=u[1],f=Object(c.useState)(""),b=Object(x.a)(f,2),d=b[0],O=b[1];function y(){return(y=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,fetch("https://server.smarthome.mjfullstack.com/shopping/",{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){return e.json().then((function(e){s(e)}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o(e.t0);case 9:return e.prev=9,setTimeout((function(){m(!1)}),500),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))).apply(this,arguments)}function N(){return(N=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server.smarthome.mjfullstack.com/shopping/",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({item_name:t})}).then((function(e){return e.json().then((function(e){s(e)}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server.smarthome.mjfullstack.com/shopping/".concat(t),{headers:{"Content-Type":"application/json"},method:"DELETE",body:JSON.stringify({id:t})}).then((function(e){return e.json().then((function(e){s(e)}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[m]),i?"Failed to load shopping list":Object(h.jsxs)("div",{className:"max-h-screen max-w-screen",children:[Object(h.jsx)(p,{text:"Shopping List",back:!0}),Object(h.jsx)("hr",{className:"mt-5"}),j?Object(h.jsx)("div",{className:"centerCol w-full",children:Object(h.jsxs)("div",{className:"lds-ellipsis",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})}):Object(h.jsx)(_,{list:n,deleteItem:function(e,t){return w.apply(this,arguments)}}),Object(h.jsx)(k,{handleSubmit:function(e){e.preventDefault(),d&&(!function(e){N.apply(this,arguments)}(d),O(""))},newItem:d,setNewItem:O})]})};var F=function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{text:"Cams",back:!0}),Object(h.jsx)("div",{className:"flex flex-col justify-center items-center h-full",children:Object(h.jsx)("img",{src:"https://api.smarthome.mjfullstack.com/cam",className:"rounded-3xl",alt:"cam_feed"})})]})};var E=function(){return Object(h.jsx)("div",{className:"app_body",children:Object(h.jsx)(i.a,{children:Object(h.jsxs)("div",{children:[Object(h.jsx)(o.a,{exact:!0,path:"/",component:d}),Object(h.jsx)(o.a,{path:"/heating",component:w}),Object(h.jsx)(o.a,{path:"/tasks",component:C}),Object(h.jsx)(o.a,{path:"/shopping",component:T}),Object(h.jsx)(o.a,{path:"/cam",component:F}),Object(h.jsx)(o.a,{path:"/map",component:function(){return window.location.href="https://goo.gl/maps/SZnfFiGk2VhpDoWV9",null}})]})})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))},D=n(13),B=n(11);D.b.add(B.c,B.d,B.h,B.g,B.f,B.i,B.e,B.a,B.j,B.k,B.b),r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(E,{})}),document.getElementById("root")),I()}},[[40,1,2]]]);
//# sourceMappingURL=main.72f6dd23.chunk.js.map