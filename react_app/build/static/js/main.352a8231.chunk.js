(this.webpackJsonpsh_react_2=this.webpackJsonpsh_react_2||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(19),r=n.n(s),i=(n(35),n(36),n(37),n(38),n(39),n(40),n(3)),o=n(2),u=a.a.createContext(),l={isAuthenticated:!1,token:localStorage.getItem("token"),apiBaseUrl:"https://server.smarthome.mjfullstack.com"},j=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("token",JSON.stringify(t.payload.access_token)),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!0,token:t.payload.access_token});case"LOGOUT":return localStorage.clear(),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!1});default:return e}},d=n(13),b=n(30),h=n(6),f=n(14),p=n(0),O=["delay","onDelayStart","onDelayEnd","replace","to"],m=function(e){var t=e.delay,n=e.onDelayStart,a=e.onDelayEnd,s=e.replace,r=e.to,i=Object(b.a)(e,O),u=null,l=Object(h.e)(),j=Object(h.f)();Object(c.useEffect)((function(){return function(){u&&clearTimeout(u)}}),[u]);return Object(p.jsx)(f.b,Object(o.a)(Object(o.a)({},i),{},{to:r,onClick:function(e){(null===j||void 0===j?void 0:j.pathname)!==r&&(n(e,r),e.defaultPrevented||(e.preventDefault(),u=setTimeout((function(){s?l.replace(r):l.push(r),a(e,r)}),t)))}}))};m.defaultProps={replace:!1,delay:0,onDelayStart:function(){},onDelayEnd:function(){}};var x=m,v=function(e){var t=e.icon,n=e.route;return Object(p.jsx)(x,{to:n,delay:100,className:"menuBtn",children:Object(p.jsx)(d.a,{icon:t})})},g=function(e){var t=e.text,n=e.back,c=e.settings;return Object(p.jsxs)("div",{className:"Header",children:[Object(p.jsxs)("nav",{className:"header-buttons flex-row-between container",children:[Object(p.jsx)("div",{className:"flex-row-center",children:n?Object(p.jsx)(f.b,{to:n,children:Object(p.jsx)(d.a,{icon:"arrow-left",className:"headerBtn"})}):""}),Object(p.jsx)("div",{className:"flex-row-center",children:c?Object(p.jsx)(f.b,{to:c,children:Object(p.jsx)(d.a,{icon:"cog",className:"headerBtn"})}):""})]}),Object(p.jsx)("div",{className:"header-text",children:Object(p.jsx)("h1",{children:t})})]})},y=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g,{text:"smarthome.app",settings:"/config"}),Object(p.jsx)("div",{className:"container flex-col-center",children:Object(p.jsxs)("nav",{className:"Menu-buttons grid-3",children:[Object(p.jsx)(v,{route:"/heating",icon:"fire-alt"}),Object(p.jsx)(v,{route:"/tasks",icon:"tasks"}),Object(p.jsx)(v,{route:"/shopping",icon:"shopping-cart"}),Object(p.jsx)(v,{route:"/map",icon:"route"}),Object(p.jsx)(v,{route:"/cam",icon:"video"}),Object(p.jsx)(v,{route:"/recipes",icon:"pizza-slice"})]})})]})},N=n(21),k=function(e){var t=e.classname,n=void 0===t?"Loader":t;return Object(p.jsx)("div",{className:n,children:Object(p.jsxs)("div",{className:"lds-ring",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{})]})})},w=function(){var e=Object(c.useContext)(u),t=e.authState,n=e.authDispatch,a=Object(c.useState)({username:"",password:"",isSubmitting:!1,errorMessage:null}),s=Object(i.a)(a,2),r=s[0],l=s[1],j=function(e){l(Object(o.a)(Object(o.a)({},r),{},Object(N.a)({},e.target.name,e.target.value)))},d=Object(c.useRef)(null);return Object(p.jsxs)("form",{ref:d,onSubmit:function(e){e.preventDefault(),l(Object(o.a)(Object(o.a)({},r),{},{isSubmitting:!0,errorMessage:null}));var c=new FormData(d.current);fetch("".concat(t.apiBaseUrl,"/token/"),{method:"POST",body:c}).then((function(e){if(200===e.status)return e.json();throw e})).then((function(e){n({type:"LOGIN",payload:e})})).catch((function(e){l(Object(o.a)(Object(o.a)({},r),{},{isSubmitting:!1,errorMessage:e.message||e.statusText}))}))},className:"Login-form",children:[Object(p.jsxs)("div",{className:"form-control",children:[Object(p.jsx)("input",{name:"username",type:"text",placeholder:"Username",value:r.username,onChange:j,className:"timeInput text-center"}),Object(p.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:r.password,onChange:j,className:"timeInput text-center"})]}),Object(p.jsx)("input",{type:"submit",value:"Sign In",className:"btn"}),r.isSubmitting?Object(p.jsx)(k,{}):""]})},S=n(5),_=n.n(S),D=n(8),C=n(29),T=function(e){var t=e.t,n=e.toastDispatch,a=e.renderItem,s=Object(c.useRef)(null);return Object(c.useEffect)((function(){setTimeout((function(){var e=s.current;e&&(e.classList.toggle("fade-out"),setTimeout((function(){return n({type:B,payload:{id:t.id}})}),1e3))}),2500)}),[t.id,n]),Object(p.jsxs)("div",{className:"toast-container-item ".concat(t.type?t.type:"success"),ref:s,children:[Object(p.jsx)("div",{className:"toast-text",children:a(t.content)}),Object(p.jsx)("div",{role:"img","aria-label":"close toast",className:"toast-close",onClick:function(){return n({type:B,payload:{id:t.id}})},children:"\xd7"})]},t.id)};function I(e){var t=e.toast,n=U().toastDispatch,a=Object(c.useRef)();function s(e){return"function"===typeof e?e():e}return Object(p.jsx)("div",{className:"toast",children:Object(p.jsx)("div",{className:"toast-container",ref:a,children:t.map((function(e){return Object(p.jsx)(T,{t:e,toastDispatch:n,renderItem:s},e.id)}))})})}var E=Object(c.createContext)(),L=[],F="ADD",B="REMOVE",R=function(e,t){switch(t.type){case F:return[].concat(Object(C.a)(e),[{id:+new Date,content:t.payload.content,type:t.payload.type}]);case B:return e.filter((function(e){return e.id!==t.payload.id}));case"REMOVE_ALL":return L;default:return e}},A=function(e){var t=Object(c.useReducer)(R,L),n=Object(i.a)(t,2),a=n[0],r={toast:a,toastDispatch:n[1]};return Object(p.jsxs)(E.Provider,{value:r,children:[e.children,Object(s.createPortal)(Object(p.jsx)(I,{toast:a}),document.body)]})},U=function(){return Object(c.useContext)(E)},G=function(e){e.props;var t=Object(c.useState)({indoor_temp:"",outdoor_temp:"",on:!1,program_on:!1}),n=Object(i.a)(t,2),s=n[0],r=n[1],l=Object(c.useState)(null),j=Object(i.a)(l,2),d=j[0],b=j[1],h=Object(c.useState)(!0),f=Object(i.a)(h,2),O=f[0],m=f[1],x=Object(c.useState)("var(--primary-light)"),v=Object(i.a)(x,2),g=v[0],y=v[1],N=a.a.useContext(u).authState,k=U().toastDispatch,w={"Content-Type":"application/json",Authorization:"Bearer ".concat(N.token)};function S(){return(S=Object(D.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,fetch("".concat(N.apiBaseUrl,"/heating/info/")).then((function(e){return e.json().then((function(e){d&&b(null),r(e)}))})).catch((function(e){return b(e)})).then((function(){return m(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(D.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N.apiBaseUrl,"/heating/info/temperature/")).then((function(e){return e.json().then((function(e){e.on?y("red"):y("var(--primary-light)"),console.log(e),r((function(t){return Object(o.a)(Object(o.a)({},t),{},{indoor_temp:e.indoor_temp,on:e.on,program_on:e.program_on})}))}))})).catch((function(e){return b(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){var e=Object(D.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r((function(e){return Object(o.a)(Object(o.a)({},e),{},{program_on:!s.program_on})})),e.next=3,fetch("".concat(N.apiBaseUrl,"/heating/on_off/"),{headers:w}).then((function(e){return e.json().then((function(t){console.log(t),200!==e.status?k({type:F,payload:{content:"You are not authorised to do that!",type:"danger"}}):s.program_on!==t.program_on&&r((function(e){return Object(o.a)(Object(o.a)({},e),{},{program_on:t.program_on})}))}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){(function(){return S.apply(this,arguments)})().catch((function(e){return b(e)}));var e=setInterval((function(){(function(){return C.apply(this,arguments)})().catch((function(e){return b(e)}))}),5e3);return function(){return clearInterval(e)}}),[]),O?Object(p.jsx)("div",{className:"Heating-display",children:Object(p.jsxs)("div",{className:"lds-ripple mt-10",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{})]})}):Object(p.jsxs)("div",{className:"Heating-display",children:[d?Object(p.jsxs)("p",{children:["Can't update heating info: $",d.message]}):"",Object(p.jsx)("div",{className:"Indoor-temp",style:{color:g},children:s.indoor_temp}),Object(p.jsxs)("div",{className:"Other-info",children:["Outdoor: ",Object(p.jsx)("span",{className:"value",children:s.outdoor_temp})]}),Object(p.jsxs)("div",{className:"Other-info",children:["Weather: ",Object(p.jsx)("span",{className:"value",children:s.weather})]}),Object(p.jsx)("div",{className:"flex-row-center",children:Object(p.jsxs)("label",{className:"switch",children:[Object(p.jsx)("input",{type:"checkbox",name:"on_off",onChange:T,checked:s.program_on}),Object(p.jsx)("span",{className:"slider round"})]})})]})},P=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g,{text:"Central Heating",back:"/",settings:"/settings"}),Object(p.jsx)("div",{className:"container flex-col-center",children:Object(p.jsx)(G,{})})]})},J=function(){var e=Object(c.useState)({target:20,on_1:"",off_1:"",on_2:"",off_2:"",program_on:!0}),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),l=Object(i.a)(r,2),j=l[0],d=l[1],b=Object(c.useState)(null),h=Object(i.a)(b,2),f=h[0],O=h[1],m=Object(c.useState)(!0),x=Object(i.a)(m,2),v=x[0],y=x[1],N=a.a.useContext(u).authState,w=U().toastDispatch,S={"Content-Type":"application/json",Authorization:"Bearer ".concat(N.token)},C=function(){var e=Object(D.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,fetch("".concat(N.apiBaseUrl,"/heating/conf/"),{headers:S,method:"GET"}).then((function(e){if(e.status>=400)throw new Error("Bad response from server");e.json().then((function(e){if(t)return y(!1),s(e),e}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function T(){return(T=Object(D.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=3;break}return w({type:F,payload:{content:"No change.",type:"info"}}),e.abrupt("return");case 3:return e.next=5,fetch("".concat(N.apiBaseUrl,"/heating/"),{headers:S,method:"POST",body:JSON.stringify(Object(o.a)({},n))}).then((function(e){return e.json().then((function(t){200!==e.status?w({type:F,payload:{content:"You are not authorised to do that!",type:"danger"}}):(s(t),w({type:F,payload:{content:"Heating Settings Updated",type:"success"}}))}))})).catch((function(e){O(e),w({type:F,payload:{content:"Error while updating: ".concat(e.message),type:"danger"}})})).then((function(){return d(!1)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){var e=!0;return C(e),function(){return e=!1}}),[]);var I=function(e){switch(d(!0),e.target.name){case"on_1":s((function(){return Object(o.a)(Object(o.a)({},n),{},{on_1:e.target.value})}));break;case"on_2":s((function(){return Object(o.a)(Object(o.a)({},n),{},{on_2:e.target.value})}));break;case"off_1":s((function(){return Object(o.a)(Object(o.a)({},n),{},{off_1:e.target.value})}));break;case"off_2":s((function(){return Object(o.a)(Object(o.a)({},n),{},{off_2:e.target.value})}))}};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g,{text:"Heating Settings",back:"/heating"}),v?Object(p.jsx)(k,{classname:"Loader Loader-trans"}):f?"Something went wrong":Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"Heating-settings",children:[Object(p.jsxs)("h2",{children:["Target: ",n.target,"\xb0C"]}),Object(p.jsxs)("form",{className:"Heating-form",onSubmit:function(e){e.preventDefault(),function(){T.apply(this,arguments)}(n)},children:[Object(p.jsx)("div",{children:Object(p.jsx)("input",{name:"target",type:"range",min:"6",max:"26",onChange:function(e){d(!0),s((function(t){return Object(o.a)(Object(o.a)({},t),{},{target:e.target.value})}))},value:n.target,className:"mb-5"})}),Object(p.jsxs)("div",{className:"grid-2",children:[Object(p.jsx)("label",{children:"ON 1 "}),Object(p.jsx)("input",{name:"on_1",type:"time",className:"timeInput text-black",value:n.on_1,onChange:I}),Object(p.jsx)("label",{children:"OFF 1 "}),Object(p.jsx)("input",{name:"off_1",type:"time",className:"timeInput text-black",value:n.off_1,onChange:I}),Object(p.jsx)("label",{children:"ON 2 "}),Object(p.jsx)("input",{name:"on_2",type:"time",className:"timeInput text-black",value:n.on_2,onChange:I}),Object(p.jsx)("label",{children:"OFF 2 "}),Object(p.jsx)("input",{name:"off_2",type:"time",className:"timeInput text-black",value:n.off_2,onChange:I})]}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"submit",className:"btn",value:"SAVE"})})]})]})})]})},H=function(e){var t=e.name,n=e.tasks,c=e.DeleteFunc,a=n.filter((function(e){return e.name===t}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"Task-block",children:[Object(p.jsx)("h2",{children:t}),n?a.map((function(e){return Object(p.jsxs)("div",{className:"List-item flex-row-between",children:[Object(p.jsx)("h3",{className:"list-text-md",children:e.task},"h1-"+e.id),Object(p.jsx)(d.a,{icon:"check-circle",onDoubleClick:function(){return c(e.id,e.name)},className:"Delete-icon"},"icon-"+e.id)]},"div-"+e.id)})):Object(p.jsx)("div",{className:"text-white",children:"Nothing here!"})]})})},M=function(e){var t=e.handleSubmit,n=e.newItem,c=e.setNewItem,a=e.placeholderText,s=e.options,r=e.setID,i=e.disabled,o=U().toastDispatch,u=function(e){var t=e.target.value;r(t)};return Object(p.jsxs)("form",{onSubmit:i?function(e){e.preventDefault(),o({type:F,payload:{content:"This feature is not currently supported",type:"danger"}})}:t,className:"Add-item",children:[s?Object(p.jsx)("div",{className:"Option-radios",children:s.map((function(e){return Object(p.jsxs)("label",{htmlFor:e[0]+"Radio",className:"Radio-container",children:[e[1],Object(p.jsx)("input",{type:"radio",id:e[0]+"Radio",name:"name",value:e[0],required:!0,onChange:u},e[0]+"rad"),Object(p.jsx)("span",{className:"checkmark"})]},e[0]+"rad")}))}):"",Object(p.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)},value:n,placeholder:a})]})},z="https://server.smarthome.mjfullstack.com";function V(){return(V=Object(D.a)(_.a.mark((function e(t,n,c,a){var s,r,i,u,l=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:null,r=l.length>5&&void 0!==l[5]?l[5]:null,i=new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}),u={headers:i,method:n},s&&(u=Object(o.a)(Object(o.a)({},u),{},{body:s})),e.next=7,fetch(z+t,u).then((function(e){return e.json().then((function(t){e.status>400?r&&r({type:F,payload:{content:"You are not authorised to do that!",type:"danger"}}):a(t)}))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(e,t,n,c){return V.apply(this,arguments)},W=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!0),l=Object(i.a)(r,2),j=l[0],d=l[1],b=Object(c.useState)({names:[],tasks:[]}),h=Object(i.a)(b,2),f=h[0],O=h[1],m=a.a.useContext(u).authState,x=Object(c.useState)(""),v=Object(i.a)(x,2),y=v[0],N=v[1],w=Object(c.useState)(0),S=Object(i.a)(w,2),C=S[0],T=S[1],I=U().toastDispatch;function E(e,t){return L.apply(this,arguments)}function L(){return(L=Object(D.a)(_.a.mark((function e(t,n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("/tasks/","POST",m,O,JSON.stringify({hm_id:t,task:n}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return B.apply(this,arguments)}function B(){return(B=Object(D.a)(_.a.mark((function e(t,n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O((function(e){return Object(o.a)(Object(o.a)({},e),{},{name:f.tasks.filter((function(e){return e.id!==t}))})})),e.next=3,Y("/tasks/".concat(t),"DELETE",m,O,JSON.stringify({id:t}),I).catch((function(e){return s(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){Y("/tasks/","GET",m,O).catch((function(e){return s(e)})).finally((function(){d(!1)}))}),[m]);return Object(p.jsxs)("div",{className:"Outer",children:[Object(p.jsx)(g,{text:"Tasks",back:"/"}),Object(p.jsxs)("div",{className:"container",children:[n?"Failed to load tasks; are you authorised to view them?":j?Object(p.jsx)(k,{classname:"Loader Loader-trans"}):Object(p.jsx)("div",{className:"Task-blocks",children:f?f.names.map((function(e){return Object(p.jsx)("div",{className:"Task-block flex-col-center",children:Object(p.jsx)(H,{name:e[1],tasks:f.tasks,DeleteFunc:F,AddFunc:E},e+"tb")},e+"mb")})):""}),Object(p.jsx)(M,{handleSubmit:function(e){e.preventDefault(),y&&(E(C,y),N(""))},newItem:y,setNewItem:N,placeholderText:"Add a New Task",options:f.names,setID:T})]})]})},q=function(e){var t=e.func,n=e.id,c=e.icon;return Object(p.jsx)(d.a,{onClick:function(){t(n)},icon:c,className:"Delete-icon"})},Z=function(e){var t=e.list,n=e.deleteItem;return Object(p.jsx)("div",{className:"List flex-col-start",children:t.length?t.map((function(e,t){return Object(p.jsxs)("div",{className:"List-item flex-row-between",children:[Object(p.jsx)("h2",{className:"text-2xl ml-2",children:e.item_name},"h1"+t),Object(p.jsx)(q,{icon:"check-circle",func:n,id:e.id,className:"Delete-icon"},"icon"+t)]},"div"+t)})):Object(p.jsx)("div",{className:"text-white",children:"Nothing here!"})})},$=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),o=Object(i.a)(r,2),l=o[0],j=o[1],d=Object(c.useState)(!0),b=Object(i.a)(d,2),h=b[0],f=b[1],O=Object(c.useState)(""),m=Object(i.a)(O,2),x=m[0],v=m[1],y=a.a.useContext(u).authState,N=U().toastDispatch;function w(){return(w=Object(D.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("/shopping/","POST",y,s,JSON.stringify({item_name:t}),N).catch((function(e){return j(e)})).finally((function(){return f(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){f(!0),Y("/shopping/","GET",y,s).catch((function(e){return j(e)})).finally((function(){return f(!1)})).finally((function(){return f(!1)}))}),[y]);function S(){return(S=Object(D.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(n.filter((function(e){return e.id!==t}))),e.next=3,Y("/shopping/".concat(t),"DELETE",y,s,JSON.stringify({id:t}),N).catch((function(e){return j(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"Outer container",children:[Object(p.jsx)(g,{text:"Shopping List",back:"/"}),h?Object(p.jsx)(k,{classname:"Loader Loader-trans"}):l?"Failed to load shopping list":Object(p.jsx)(Z,{list:n,deleteItem:function(e){return S.apply(this,arguments)}}),Object(p.jsx)(M,{handleSubmit:function(e){e.preventDefault(),x&&(function(e){return w.apply(this,arguments)}(x).catch(),v(""))},newItem:x,setNewItem:v,placeholderText:"New item"})]})};var K=function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g,{text:"Cams",back:"/"}),Object(p.jsx)("div",{className:"flex flex-col justify-center items-center h-full",children:Object(p.jsx)("img",{src:"https://api.smarthome.mjfullstack.com/cam",className:"rounded-3xl",alt:"cam_feed"})})]})},Q=n(28),X=function(e){var t=e.list,n=(e.deleteItem,e.setCurrent);return Object(p.jsx)("div",{className:"List flex-col-start",children:t.length?t.map((function(e,t){return Object(p.jsxs)("div",{onClick:function(){n(e)},className:"List-item Recipe flex-row-between",children:[Object(p.jsxs)("div",{className:"",children:[Object(p.jsx)("h1",{className:"text-2xl ml-2",children:e.meal_name},"h1"+e.id),Object(p.jsx)("h6",{className:"ml-2",children:e.ingredients},"h6"+e.id)]}),e.notes?Object(p.jsx)(d.a,{icon:Q.a,className:"fa-2x"},"icon"+e.id):""]},"div"+e.id)})):Object(p.jsx)("div",{className:"text-white",children:"Nothing here!"})})},ee=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),o=Object(i.a)(r,2),l=o[0],j=o[1],d=Object(c.useState)(!0),b=Object(i.a)(d,2),h=b[0],f=b[1],O=Object(c.useState)(""),m=Object(i.a)(O,2),x=m[0],v=m[1],y=Object(c.useState)(null),N=Object(i.a)(y,2),w=N[0],S=N[1],C=a.a.useContext(u).authState;Object(c.useEffect)((function(){f(!0),Y("/recipes/","GET",C,s).catch((function(e){return j(e)})).finally((function(){f(!1)}))}),[C]);function T(){return(T=Object(D.a)(_.a.mark((function e(t,n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server.smarthome.mjfullstack.com/recipes/".concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C.token)},method:"DELETE",body:JSON.stringify({id:t})}).then((function(e){return e.json().then((function(e){s(e)}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"Outer container",children:[Object(p.jsx)(g,{text:"Recipes",back:"/"}),h?Object(p.jsx)(k,{classname:"Loader Loader-trans"}):l?"Failed to load recipes":Object(p.jsx)(X,{list:n,deleteItem:function(e,t){return T.apply(this,arguments)},setCurrent:S}),Object(p.jsx)(M,{handleSubmit:function(e){e.preventDefault(),x&&v("")},newItem:x,setNewItem:v,placeholderText:"New Recipe",disabled:!0}),w?Object(p.jsx)("div",{className:"Recipe-card",children:Object(p.jsxs)("div",{className:"Recipe-card-inner container",children:[Object(p.jsx)("div",{className:"close-button",children:Object(p.jsx)("div",{onClick:function(){S(null)},children:"\xd7"})}),Object(p.jsxs)("div",{className:"Recipe-card-content flex-col-center",children:[Object(p.jsx)("h1",{children:w.meal_name}),Object(p.jsx)("h4",{children:"Ingredients:"}),Object(p.jsx)("p",{children:w.ingredients}),w.notes?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{children:"Notes:"}),Object(p.jsx)("p",{children:w.notes})]}):""]})]})}):""]})},te=function(){var e=Object(c.useContext)(u).authDispatch,t=Object(h.e)();return Object(p.jsxs)("div",{children:[Object(p.jsx)(g,{text:"Settings",back:"/"}),Object(p.jsxs)("div",{className:"flex-col-center",children:[Object(p.jsx)("input",{type:"submit",className:"btn",onClick:function(){console.log(document.body.classList),document.body.classList.toggle("dark-mode")},value:"Dark Mode"}),Object(p.jsx)("input",{type:"submit",className:"btn",onClick:function(n){n.preventDefault(),e({type:"LOGOUT"}),t.push("/")},value:"Log Out"})]})]})};var ne=function(){var e=Object(c.useReducer)(j,l),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!0),r=Object(i.a)(s,2),o=r[0],d=r[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("token");e?fetch("".concat(z,"/check_token/"),{method:"POST",body:JSON.stringify({access_token:e,token_type:"Bearer"})}).then((function(e){return e.json().then((function(t){200!==e.status?d(!1):a({type:"LOGIN",payload:t})}))})).catch((function(e){a({type:"LOGOUT"})})).then((function(){return d(!1)})):d(!1)}),[]),Object(p.jsx)(u.Provider,{value:{authState:n,authDispatch:a},children:Object(p.jsxs)("div",{className:"App",children:[o?Object(p.jsx)(k,{}):n.isAuthenticated?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h.a,{exact:!0,path:"/",component:y}),Object(p.jsx)(h.a,{path:"/settings",component:function(){return Object(p.jsx)(J,{})}}),Object(p.jsx)(h.a,{path:"/config",component:te}),Object(p.jsx)(h.a,{path:"/heating",component:P}),Object(p.jsx)(h.a,{path:"/tasks",component:W}),Object(p.jsx)(h.a,{path:"/shopping",component:$}),Object(p.jsx)(h.a,{path:"/cam",component:K}),Object(p.jsx)(h.a,{path:"/recipes",component:ee})]}):Object(p.jsx)(w,{}),Object(p.jsx)(h.a,{path:"/map",component:function(){return window.location.href="https://goo.gl/maps/SZnfFiGk2VhpDoWV9",null}})]})})},ce=n(15),ae=n(9);ce.b.add(ae.d,ae.c,ae.h,ae.e,ae.j,ae.i,ae.g,ae.k,ae.f,ae.a,ae.l,ae.m,ae.b),r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(f.a,{children:Object(p.jsx)(A,{children:Object(p.jsx)(ne,{})})})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.352a8231.chunk.js.map