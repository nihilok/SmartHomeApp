(this.webpackJsonpsh_react_2=this.webpackJsonpsh_react_2||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(20),r=n.n(s),i=(n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(3)),o=n(6),u=n(2),l=n(5),j=n.n(l),b=n(9),d=n(29),h=n(0),O=function(e){var t=e.t,n=e.toastDispatch,a=e.renderItem,s=Object(c.useRef)(null);return Object(c.useEffect)((function(){setTimeout((function(){var e=s.current;e&&(e.classList.toggle("fade-out"),setTimeout((function(){return n({type:v,payload:{id:t.id}})}),1e3))}),2500)}),[t.id,n]),Object(h.jsxs)("div",{className:"toast-container-item ".concat(t.type?t.type:"success"),ref:s,children:[Object(h.jsx)("div",{className:"toast-text",children:a(t.content)}),Object(h.jsx)("div",{role:"img","aria-label":"close toast",className:"toast-close",onClick:function(){return n({type:v,payload:{id:t.id}})},children:"\xd7"})]},t.id)};function f(e){var t=e.toast,n=N().toastDispatch,a=Object(c.useRef)();function s(e){return"function"===typeof e?e():e}return Object(h.jsx)("div",{className:"toast",children:Object(h.jsx)("div",{className:"toast-container",ref:a,children:t.map((function(e){return Object(h.jsx)(O,{t:e,toastDispatch:n,renderItem:s},e.id)}))})})}var p=Object(c.createContext)(),m=[],x="ADD",v="REMOVE",g=function(e,t){switch(t.type){case x:return[].concat(Object(d.a)(e),[{id:+new Date,content:t.payload.content,type:t.payload.type}]);case v:return e.filter((function(e){return e.id!==t.payload.id}));case"REMOVE_ALL":return m;default:return e}},y=function(e){var t=Object(c.useReducer)(g,m),n=Object(i.a)(t,2),a=n[0],r={toast:a,toastDispatch:n[1]};return Object(h.jsxs)(p.Provider,{value:r,children:[e.children,Object(s.createPortal)(Object(h.jsx)(f,{toast:a}),document.body)]})},N=function(){return Object(c.useContext)(p)},k="http://localhost:8000";function S(){return(S=Object(b.a)(j.a.mark((function e(t,n,c,a){var s,r,i,o,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:null,r=l.length>5&&void 0!==l[5]?l[5]:null,i=new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}),o={headers:i,method:n},s&&(o=Object(u.a)(Object(u.a)({},o),{},{body:s})),e.next=7,fetch(k+t,o).then((function(e){if(200!==e.status)throw r&&r({type:x,payload:{content:"You are not authorised to do that!",type:"danger"}}),new Error("Bad response");return e.json()})).then((function(e){a(e)})).catch((function(e){return console.log(e)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e,t,n,c){return S.apply(this,arguments)},_=a.a.createContext(),D={isAuthenticated:!1,token:localStorage.getItem("token"),apiBaseUrl:k},C=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("token",JSON.stringify(t.payload.access_token)),Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,token:t.payload.access_token});case"LOGOUT":return localStorage.clear(),Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!1});default:return e}},T=n(10),I=n(30),E=n(15),L=["delay","onDelayStart","onDelayEnd","replace","to"],R=function(e){var t=e.delay,n=e.onDelayStart,a=e.onDelayEnd,s=e.replace,r=e.to,i=Object(I.a)(e,L),l=null,j=Object(o.f)(),b=Object(o.g)();Object(c.useEffect)((function(){return function(){l&&clearTimeout(l)}}),[l]);return Object(h.jsx)(E.b,Object(u.a)(Object(u.a)({},i),{},{to:r,onClick:function(e){(null===b||void 0===b?void 0:b.pathname)!==r&&(n(e,r),e.defaultPrevented||(e.preventDefault(),l=setTimeout((function(){s?j.replace(r):j.push(r),a(e,r)}),t)))}}))};R.defaultProps={replace:!1,delay:0,onDelayStart:function(){},onDelayEnd:function(){}};var F=R,B=function(e){var t=e.icon,n=e.route;return Object(h.jsx)(F,{to:n,delay:100,className:"menuBtn",children:Object(h.jsx)(T.a,{icon:t})})},A=function(e){var t=e.text,n=e.back,c=e.settings;return Object(h.jsxs)("div",{className:"Header",children:[Object(h.jsxs)("nav",{className:"header-buttons flex-row-between container",children:[Object(h.jsx)("div",{className:"flex-row-center",children:n?Object(h.jsx)(E.b,{to:n,children:Object(h.jsx)(T.a,{icon:"arrow-left",className:"headerBtn"})}):""}),Object(h.jsx)("div",{className:"flex-row-center",children:c?Object(h.jsx)(E.b,{to:c,children:Object(h.jsx)(T.a,{icon:"cog",className:"headerBtn"})}):""})]}),Object(h.jsx)("div",{className:"header-text",children:Object(h.jsx)("h1",{children:t})})]})},P=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A,{text:"smarthome.app",settings:"/config"}),Object(h.jsx)("div",{className:"container flex-col-center",children:Object(h.jsxs)("nav",{className:"Menu-buttons grid-3",children:[Object(h.jsx)(B,{route:"/heating",icon:"fire-alt"}),Object(h.jsx)(B,{route:"/tasks",icon:"tasks"}),Object(h.jsx)(B,{route:"/shopping",icon:"shopping-cart"}),Object(h.jsx)(B,{route:"/map",icon:"route"}),Object(h.jsx)(B,{route:"/cam",icon:"video"}),Object(h.jsx)(B,{route:"/recipes",icon:"pizza-slice"})]})})]})},U=n(22),G=function(e){var t=e.classname,n=void 0===t?"Loader":t;return Object(h.jsx)("div",{className:n,children:Object(h.jsxs)("div",{className:"lds-ring",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})})},J=function(){var e=Object(c.useContext)(_),t=e.authState,n=e.authDispatch,a=Object(c.useState)({username:"",password:"",isSubmitting:!1,errorMessage:null}),s=Object(i.a)(a,2),r=s[0],o=s[1],l=function(e){o(Object(u.a)(Object(u.a)({},r),{},Object(U.a)({},e.target.name,e.target.value)))},j=Object(c.useRef)(null);return Object(h.jsxs)("form",{ref:j,onSubmit:function(e){e.preventDefault(),o(Object(u.a)(Object(u.a)({},r),{},{isSubmitting:!0,errorMessage:null}));var c=new FormData(j.current);fetch("".concat(t.apiBaseUrl,"/token/"),{method:"POST",body:c}).then((function(e){if(200===e.status)return e.json();throw e})).then((function(e){n({type:"LOGIN",payload:e})})).catch((function(e){o(Object(u.a)(Object(u.a)({},r),{},{isSubmitting:!1,errorMessage:e.message||e.statusText}))}))},className:"Login-form",children:[Object(h.jsxs)("div",{className:"form-control",children:[Object(h.jsx)("input",{name:"username",type:"text",placeholder:"Username",value:r.username,onChange:l,className:"timeInput text-center"}),Object(h.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:r.password,onChange:l,className:"timeInput text-center"})]}),Object(h.jsx)("input",{type:"submit",value:"Sign In",className:"btn"}),r.isSubmitting?Object(h.jsx)(G,{}):""]})},H=function(e){e.props;var t=a.a.useContext(_).authState,n=N().toastDispatch,s=Object(c.useState)({indoor_temp:"",outdoor_temp:"",on:!1,program_on:!1}),r=Object(i.a)(s,2),o=r[0],l=r[1],d=Object(c.useState)(null),O=Object(i.a)(d,2),f=O[0],p=O[1],m=Object(c.useState)(!0),v=Object(i.a)(m,2),g=v[0],y=v[1],k=Object(c.useState)("var(--primary-light)"),S=Object(i.a)(k,2),w=S[0],D=S[1],C={"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)};function T(){return(T=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,fetch("".concat(t.apiBaseUrl,"/heating/info/")).then((function(e){return e.json().then((function(e){f&&p(null),l(e)}))})).catch((function(e){return p(e)})).then((function(){return y(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.apiBaseUrl,"/heating/info/temperature/")).then((function(e){return e.json().then((function(e){p(null),e.on?D("firebrick"):D("var(--primary-light)"),l((function(t){return Object(u.a)(Object(u.a)({},t),{},{indoor_temp:e.indoor_temp,on:e.on,program_on:e.program_on})}))}))})).catch((function(e){return p(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){var e=Object(b.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l((function(e){return Object(u.a)(Object(u.a)({},e),{},{program_on:!o.program_on})})),e.next=3,fetch("".concat(t.apiBaseUrl,"/heating/on_off/"),{headers:C}).then((function(e){return e.json().then((function(t){200!==e.status?n({type:x,payload:{content:"You are not authorised to do that!",type:"danger"}}):o.program_on!==t.program_on&&l((function(e){return Object(u.a)(Object(u.a)({},e),{},{program_on:t.program_on})}))}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){(function(){return T.apply(this,arguments)})().catch((function(e){return p(e)}));var e=setInterval((function(){(function(){return I.apply(this,arguments)})().catch((function(e){return p(e)}))}),5e3);return function(){return clearInterval(e)}}),[]),g?Object(h.jsx)("div",{className:"Heating-display",children:Object(h.jsxs)("div",{className:"lds-ripple mt-10",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})}):Object(h.jsxs)("div",{className:"Heating-display",children:[f?Object(h.jsxs)("p",{children:["Can't update heating info: $",f.message]}):"",Object(h.jsxs)("div",{className:"Display-screen",children:[Object(h.jsx)("div",{className:"Indoor-temp",style:{color:w},children:o.indoor_temp}),Object(h.jsx)("div",{className:"Other-info",children:Object(h.jsxs)("span",{className:"value",children:[o.outdoor_temp," outdoors"]})}),Object(h.jsx)("div",{className:"Other-info",children:Object(h.jsx)("span",{className:"value",children:o.weather})})]}),Object(h.jsx)("div",{className:"flex-row-center",children:Object(h.jsxs)("label",{className:"switch",children:[Object(h.jsx)("input",{type:"checkbox",name:"on_off",onChange:E,checked:o.program_on}),Object(h.jsx)("span",{className:"slider round"})]})})]})},M=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A,{text:"Central Heating",back:"/",settings:"/settings"}),Object(h.jsx)("div",{className:"container flex-col-center",children:Object(h.jsx)(H,{})})]})},V=function(){var e=Object(c.useState)({target:20,on_1:"",off_1:"",on_2:"",off_2:"",program_on:!0}),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),o=Object(i.a)(r,2),l=o[0],d=o[1],O=Object(c.useState)(null),f=Object(i.a)(O,2),p=f[0],m=f[1],v=Object(c.useState)(!0),g=Object(i.a)(v,2),y=g[0],k=g[1],S=a.a.useContext(_).authState,w=N().toastDispatch,D={"Content-Type":"application/json",Authorization:"Bearer ".concat(S.token)},C=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,fetch("".concat(S.apiBaseUrl,"/heating/conf/"),{headers:D,method:"GET"}).then((function(e){if(e.status>=400)throw new Error("Bad response from server");e.json().then((function(e){if(t)return k(!1),s(e),e}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function T(){return(T=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=3;break}return w({type:x,payload:{content:"No change.",type:"info"}}),e.abrupt("return");case 3:return e.next=5,fetch("".concat(S.apiBaseUrl,"/heating/"),{headers:D,method:"POST",body:JSON.stringify(Object(u.a)({},n))}).then((function(e){return e.json().then((function(t){200!==e.status?w({type:x,payload:{content:"You are not authorised to do that!",type:"danger"}}):(s(t),w({type:x,payload:{content:"Heating Settings Updated",type:"success"}}))}))})).catch((function(e){m(e),w({type:x,payload:{content:"Error while updating: ".concat(e.message),type:"danger"}})})).then((function(){return d(!1)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){var e=!0;return C(e),function(){return e=!1}}),[]);var I=function(e){switch(d(!0),e.target.name){case"on_1":s((function(){return Object(u.a)(Object(u.a)({},n),{},{on_1:e.target.value})}));break;case"on_2":s((function(){return Object(u.a)(Object(u.a)({},n),{},{on_2:e.target.value})}));break;case"off_1":s((function(){return Object(u.a)(Object(u.a)({},n),{},{off_1:e.target.value})}));break;case"off_2":s((function(){return Object(u.a)(Object(u.a)({},n),{},{off_2:e.target.value})}))}};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A,{text:"Heating Settings",back:"/heating",settings:"/config"}),y?Object(h.jsx)(G,{classname:"Loader Loader-trans"}):p?"Something went wrong":Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"Heating-settings",children:[Object(h.jsxs)("h2",{children:["Target: ",n.target,"\xb0C"]}),Object(h.jsxs)("form",{className:"Heating-form",onSubmit:function(e){e.preventDefault(),function(){T.apply(this,arguments)}(n)},children:[Object(h.jsx)("div",{children:Object(h.jsx)("input",{name:"target",type:"range",min:"6",max:"26",onChange:function(e){d(!0),s((function(t){return Object(u.a)(Object(u.a)({},t),{},{target:e.target.value})}))},value:n.target,className:""})}),Object(h.jsxs)("div",{className:"grid-2",children:[Object(h.jsx)("label",{children:"ON 1 "}),Object(h.jsx)("input",{name:"on_1",type:"time",className:"timeInput",value:n.on_1,onChange:I}),Object(h.jsx)("label",{children:"OFF 1 "}),Object(h.jsx)("input",{name:"off_1",type:"time",className:"timeInput",value:n.off_1,onChange:I}),Object(h.jsx)("label",{children:"ON 2 "}),Object(h.jsx)("input",{name:"on_2",type:"time",className:"timeInput",value:n.on_2,onChange:I}),Object(h.jsx)("label",{children:"OFF 2 "}),Object(h.jsx)("input",{name:"off_2",type:"time",className:"timeInput",value:n.off_2,onChange:I})]}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"submit",className:"btn",value:"SAVE"})})]})]})})]})},z=n(14),Y=n(8),q=function(e){var t=e.item,n=e.deleteItem,a=Object(c.useState)(z.a),s=Object(i.a)(a,2),r=s[0],o=s[1],u=Object(c.useRef)(null);return Object(c.useEffect)((function(){o(z.a),u.current.scrollIntoView()}),[]),Object(h.jsxs)("div",{ref:u,className:"List-item flex-row-between",children:[Object(h.jsx)("h3",{className:"list-text-md",children:t.text},"h1-"+t.id),Object(h.jsx)(T.a,{icon:r,onClick:function(e){e.preventDefault(),r===z.a?(u.current.children[0].style.textDecoration="line-through",o(Y.b)):(u.current.children[0].style.textDecoration="none",o(z.a))},onDoubleClick:function(e){e.preventDefault(),u.current.style.position="fixed",u.current.style.animation="offToTop .5s ease forwards",setTimeout((function(){n(t.id)}),1e3)},className:"Delete-icon"},"icon-"+t.id)]},"div-"+t.id)},W=function(e){var t=e.name,n=e.tasks,c=e.DeleteFunc,a=n.filter((function(e){return e.name===t}));return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"Task-block",children:[Object(h.jsx)("h2",{children:t}),a?a.map((function(e){return e.text=e.task,Object(h.jsx)(q,{item:e,deleteItem:c})})):Object(h.jsx)("div",{className:"text-white",children:"Nothing here!"})]})})},Z=function(e){var t=e.handleSubmit,n=e.newItem,c=e.setNewItem,a=e.placeholderText,s=e.options,r=e.setID,i=e.disabled,o=N().toastDispatch,u=function(e){var t=e.target.value;r(t)};return Object(h.jsxs)("form",{onSubmit:i?function(e){e.preventDefault(),o({type:x,payload:{content:"This feature is not currently supported",type:"danger"}})}:t,className:"Add-item on-from-bottom",children:[s?Object(h.jsx)("div",{className:"Option-radios",children:s.map((function(e){return Object(h.jsxs)("label",{htmlFor:e[0]+"Radio",className:"Radio-container",children:[e[1],Object(h.jsx)("input",{type:"radio",id:e[0]+"Radio",name:"name",value:e[0],required:!0,onChange:u},e[0]+"rad"),Object(h.jsx)("span",{className:"checkmark"})]},e[0]+"rad")}))}):"",Object(h.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)},value:n,placeholder:a})]})},$=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!0),o=Object(i.a)(r,2),l=o[0],d=o[1],O=Object(c.useState)({names:[],tasks:[]}),f=Object(i.a)(O,2),p=f[0],m=f[1],x=a.a.useContext(_).authState,v=Object(c.useState)(""),g=Object(i.a)(v,2),y=g[0],k=g[1],S=Object(c.useState)(0),D=Object(i.a)(S,2),C=D[0],T=D[1],I=N().toastDispatch;function E(e,t){for(var n=[],c=[],a=0;a<e.length;a++)n[e[a]]=!0;for(var s=0;s<t.length;s++)n[t[s]]?delete n[t[s]]:n[t[s]]=!0;for(var r in n)c.push(r);return c}function L(e,t){return R.apply(this,arguments)}function R(){return(R=Object(b.a)(j.a.mark((function e(t,n){var c,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p,e.next=3,w("/tasks/","POST",x,m,JSON.stringify({hm_id:t,task:n}),I);case 3:if(console.log(c),console.log(p),a=E(c.tasks,p.tasks))for(console.log(a),s=0;s<a.length;s++)console.log(a[s].name);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return B.apply(this,arguments)}function B(){return(B=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:p.tasks.filter((function(e){return e.id!==t}))})})),e.next=3,w("/tasks/".concat(t),"DELETE",x,m,JSON.stringify({id:t}),I).catch((function(e){return s(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){w("/tasks/","GET",x,m).catch((function(e){return s(e)})).finally((function(){d(!1)}))}),[x]);return Object(h.jsxs)("div",{className:"Outer",children:[Object(h.jsx)(A,{text:"Tasks",back:"/"}),Object(h.jsxs)("div",{className:"container",children:[n?"Failed to load tasks; are you authorised to view them?":l?Object(h.jsx)(G,{classname:"Loader Loader-trans"}):Object(h.jsx)("div",{className:"Task-blocks",children:p?p.names.map((function(e){return Object(h.jsx)("div",{className:"Task-block flex-col-center",children:Object(h.jsx)(W,{name:e[1],tasks:p.tasks,DeleteFunc:F,AddFunc:L},e+"tb")},e+"mb")})):""}),Object(h.jsx)(Z,{handleSubmit:function(e){e.preventDefault(),y&&(L(C,y),k(""))},newItem:y,setNewItem:k,placeholderText:"New Task",options:p.names,setID:T})]})]})},K=function(e){var t=e.list,n=e.deleteItem;return Object(h.jsx)("div",{className:"List flex-col-start",children:t.length?t.map((function(e,t){return e.text=e.item_name,Object(h.jsx)(q,{item:e,deleteItem:n})})):Object(h.jsx)("div",{className:"text-white",children:"Nothing here!"})})},Q=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),o=Object(i.a)(r,2),u=o[0],l=o[1],d=Object(c.useState)(!0),O=Object(i.a)(d,2),f=O[0],p=O[1],m=Object(c.useState)(""),x=Object(i.a)(m,2),v=x[0],g=x[1],y=a.a.useContext(_).authState,k=N().toastDispatch;function S(){return(S=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/shopping/","POST",y,s,JSON.stringify({item_name:t}),k).catch((function(e){return l(e)})).finally((function(){return p(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){p(!0),w("/shopping/","GET",y,s).catch((function(e){return l(e)})).finally((function(){return p(!1)})).finally((function(){return p(!1)}))}),[y]);function D(){return(D=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(n.filter((function(e){return e.id!==t}))),e.next=3,w("/shopping/".concat(t),"DELETE",y,s,JSON.stringify({id:t}),k).catch((function(e){return l(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"Outer container",children:[Object(h.jsx)(A,{text:"Shopping List",back:"/"}),f?Object(h.jsx)(G,{classname:"Loader Loader-trans"}):u?"Failed to load shopping list":Object(h.jsx)(K,{list:n,deleteItem:function(e){return D.apply(this,arguments)}}),Object(h.jsx)(Z,{handleSubmit:function(e){e.preventDefault(),v&&(function(e){return S.apply(this,arguments)}(v).catch(),g(""))},newItem:v,setNewItem:g,placeholderText:"New item"})]})};var X=function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A,{text:"Cams",back:"/"}),Object(h.jsxs)("div",{className:"flex-col-center container",children:[Object(h.jsx)("div",{className:"cam-title",children:Object(h.jsx)("h3",{children:"Driveway:"})}),Object(h.jsx)("img",{src:"https://api.smarthome.mjfullstack.com/cam",className:"cam-feed",alt:"cam_feed"})]})]})},ee=function(e){var t=e.list,n=(e.deleteItem,e.setCurrent);return Object(h.jsx)("div",{className:"List flex-col-start",children:t.length?t.map((function(e,t){return Object(h.jsxs)("div",{onClick:function(){n(e)},className:"List-item Recipe flex-row-between",children:[Object(h.jsxs)("div",{className:"",children:[Object(h.jsx)("h1",{className:"text-2xl ml-2",children:e.meal_name},"h1"+e.id),Object(h.jsx)("h6",{className:"ml-2",children:e.ingredients},"h6"+e.id)]}),e.notes?Object(h.jsx)(T.a,{icon:z.b,className:"fa-2x"},"icon"+e.id):""]},"div"+e.id)})):Object(h.jsx)("div",{className:"text-white",children:"Nothing here!"})})},te=function(e){var t=e.callback;return Object(h.jsx)("button",{onClick:t,className:"Plus-button",children:"+"})},ne=function(e){var t=Object(c.useState)(e),n=Object(i.a)(t,2),a=n[0],s=n[1];return{value:a,setValue:s,reset:function(){return s("")},bind:{value:a,onChange:function(e){s(e.target.value)}}}},ce=function(e){var t=e.callback,n=e.setShown;return Object(h.jsx)("div",{className:"Recipe-card",onClick:function(){return n(!1)},children:Object(h.jsxs)("div",{className:"sure",children:[Object(h.jsx)("h1",{children:"Are you sure?"}),Object(h.jsx)("button",{onClick:t,children:"Yes"})]})})},ae=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),o=Object(i.a)(r,2),l=o[0],d=o[1],O=Object(c.useState)(!0),f=Object(i.a)(O,2),p=f[0],m=f[1],x=Object(c.useState)(null),v=Object(i.a)(x,2),g=v[0],y=v[1],k=Object(c.useState)(!1),S=Object(i.a)(k,2),D=S[0],C=S[1],T=ne(""),I=T.value,E=T.bind,L=T.reset,R=ne(""),F=R.value,B=R.bind,P=R.reset,U=ne(""),J=U.value,H=U.bind,M=U.reset,V=a.a.useContext(_).authState,z=Object(c.useState)(!1),Y=Object(i.a)(z,2),q=Y[0],W=Y[1],Z=Object(c.useRef)(null),$=N().toastDispatch,K=Object(c.useCallback)((function(){m(!0),w("/recipes/","GET",V,s).catch((function(e){return d(e)})).finally((function(){m(!1)}))}),[V]);Object(c.useEffect)((function(){K()}),[K]);var Q=function(e){e.preventDefault();var t={meal_name:I,ingredients:F,notes:J};m(!0),w("/recipes/","POST",V,s,JSON.stringify(t)).catch((function(e){return d(e)})).finally((function(){m(!1)})),L(),P(),M(),K(),C(!1)};function X(){return ae.apply(this,arguments)}function ae(){return(ae=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w("/recipes/".concat(Z.current.id,"/"),"DELETE",V,s,JSON.stringify({id:Z.current.id}),$).catch((function(e){return d(e)})).finally((function(){m(!1)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=function(){Z.current=g,W(!0)};return Object(h.jsxs)("div",{className:"Outer container",children:[Object(h.jsx)(A,{text:"Recipes",back:"/"}),p?Object(h.jsx)(G,{classname:"Loader Loader-trans"}):l?"Failed to load recipes":Object(h.jsx)(ee,{list:n,deleteItem:X,setCurrent:y}),Object(h.jsx)("nav",{className:"plus-button",children:Object(h.jsx)(te,{callback:function(){return C(!0)}})}),g?Object(h.jsx)("div",{className:"Recipe-card",onClick:function(){return y(null)},children:Object(h.jsxs)("div",{className:"note on-from-bottom",children:[Object(h.jsxs)("div",{className:"note-top",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:g.meal_name})}),Object(h.jsx)("div",{})]}),Object(h.jsxs)("div",{className:"note-bottom",children:[Object(h.jsxs)("div",{className:"Recipe-card-content",children:[Object(h.jsx)("h4",{children:"Ingredients:"}),Object(h.jsx)("p",{children:g.ingredients}),g.notes?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h4",{children:"Notes:"}),Object(h.jsx)("p",{children:g.notes})]}):""]}),Object(h.jsx)("div",{className:"remove-recipe",onClick:se,children:"Remove Recipe"})]})]})}):D?Object(h.jsx)("div",{className:"Recipe-card",children:Object(h.jsxs)("div",{className:"note on-from-bottom",children:[Object(h.jsx)("div",{className:"close-button",onClick:function(){return C(!1)},children:"\xd7"}),Object(h.jsxs)("div",{className:"note-top",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"Add a Recipe.."})}),Object(h.jsx)("div",{})]}),Object(h.jsx)("div",{className:"note-bottom",children:Object(h.jsx)("div",{className:"Recipe-card-content",children:Object(h.jsxs)("form",{className:"New-recipe flex-col-center",onSubmit:Q,children:[Object(h.jsx)("div",{className:"form-control",children:Object(h.jsx)("input",Object(u.a)(Object(u.a)({type:"text",placeholder:"Meal Name"},E),{},{required:!0}))}),Object(h.jsx)("div",{className:"form-control",children:Object(h.jsx)("textarea",Object(u.a)(Object(u.a)({placeholder:"Ingredients"},B),{},{required:!0}))}),Object(h.jsx)("div",{className:"form-control",children:Object(h.jsx)("textarea",Object(u.a)({placeholder:"Notes"},H))}),Object(h.jsx)("input",{type:"submit",value:"Save",className:"btn-outline"})]})})})]})}):"",q?Object(h.jsx)(ce,{callback:X,setShown:W}):""]})},se=function(){var e=Object(c.useContext)(_).authDispatch,t=Object(o.f)();return Object(h.jsxs)("div",{children:[Object(h.jsx)(A,{text:"Settings",back:"/"}),Object(h.jsxs)("div",{className:"flex-col-center",children:[Object(h.jsx)("input",{type:"submit",className:"btn",onClick:function(){console.log(document.body.classList),document.body.classList.toggle("dark-mode")},value:"Dark Mode"}),Object(h.jsx)("input",{type:"submit",className:"btn",onClick:function(n){n.preventDefault(),e({type:"LOGOUT"}),t.push("/")},value:"Log Out"})]})]})};var re=function(){var e=Object(c.useReducer)(C,D),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!0),r=Object(i.a)(s,2),u=r[0],l=r[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("token");e?fetch("".concat(k,"/check_token/"),{method:"POST",body:JSON.stringify({access_token:e,token_type:"Bearer"})}).then((function(e){return e.json().then((function(t){200!==e.status?(a({type:"LOGOUT"}),l(!1)):a({type:"LOGIN",payload:t})}))})).catch((function(e){a({type:"LOGOUT"})})).finally((function(){return l(!1)})):l(!1)}),[]),Object(h.jsx)(_.Provider,{value:{authState:n,authDispatch:a},children:Object(h.jsxs)("div",{className:"App",children:[u?Object(h.jsx)(G,{}):n.isAuthenticated?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(o.b,{exact:!0,path:"/",component:P}),Object(h.jsx)(o.b,{path:"/settings",component:function(){return Object(h.jsx)(V,{})}}),Object(h.jsx)(o.b,{path:"/config",component:se}),Object(h.jsx)(o.b,{path:"/heating",component:M}),Object(h.jsx)(o.b,{path:"/tasks",component:$}),Object(h.jsx)(o.b,{path:"/shopping",component:Q}),Object(h.jsx)(o.b,{path:"/cam",component:X}),Object(h.jsx)(o.b,{path:"/recipes",component:ae})]}):Object(h.jsx)(J,{}),Object(h.jsx)(o.b,{path:"/map",component:function(){return window.location.href="https://goo.gl/maps/SZnfFiGk2VhpDoWV9",Object(h.jsx)(o.a,{to:"/"})}})]})})};n(16).b.add(Y.d,Y.c,Y.h,Y.e,Y.j,Y.i,Y.g,Y.k,Y.f,Y.a,Y.l,Y.m,Y.b),r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(E.a,{children:Object(h.jsx)(y,{children:Object(h.jsx)(re,{})})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.90185b0a.chunk.js.map